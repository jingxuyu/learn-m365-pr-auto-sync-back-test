Applications that have been registered with Azure AD may require further updates. For example, apps may need to be updated to provide access to web APIs, or to be made available in other organizations. This unit describes various ways in which an organization can further configure new applications. It begins with an overview of the consent framework, which is important to understand when building applications that must be used by other users or applications. It then provides an example of the consent experience.

### Overview of the consent framework

The Azure AD consent framework can grant temporary/conditional access based on Administrator discretion. Such access makes it easy to develop multi-tenant web and native client applications. These applications allow sign-in by user accounts from an Azure AD tenant. This tenant can be different from the one where the application is registered. These applications may also need to access web APIs, such as the Microsoft Graph API (to access Azure Active Directory, Intune, and Microsoft 365 services) and APIs for other Microsoft services, along with your own web APIs. The framework is based on a user or an administrator giving consent to an application that asks to be registered in their directory. Such consent typically involves accessing directory data.

For example, if a web client application reads calendar information about a user from Microsoft 365, the user must consent to the client application first. After consent is given, the client application can call the Microsoft Graph API for the user and use the calendar information as needed. The [Microsoft Graph API](https://graph.microsoft.io/?azure-portal=true) provides access to data in Microsoft 365 (like calendars and messages from Exchange, sites and lists from SharePoint, documents from OneDrive, notebooks from OneNote, tasks from Planner, workbooks from Excel, and so on). It also provides access to users and groups from Azure AD and to data objects from other Microsoft cloud services.

The consent framework is built on OAuth 2.0 and its various flows, such as authorization code grant and client credentials grant, using public or confidential clients. By using OAuth 2.0, Azure AD makes it possible to build many different types of client applications. These apps can be built for phones, tablets, servers, or web applications, and they can gain access to the required resources.

**Additional reading.** For more information on consent framework, see the following articles:

 -  For more information about using the consent framework with OAuth2.0 authorization grants, see [Authorize access to web applications using OAuth 2.0 and Azure AD and Authentication Scenarios for Azure AD](/azure/active-directory/develop/active-directory-authentication-scenarios).
 -  For information about getting authorized access to Microsoft 365 through Microsoft Graph, see [App authentication with Microsoft Graph](https://graph.microsoft.io/docs/authorization/auth_overview?azure-portal=true).

### Example of the consent experience

The following steps describe how the consent experience works for both application developers and users.

1.  Assume you have a web client application that needs to request specific permissions to access a resource/API. The Azure portal is used to declare permission requests at configuration time. Like other configuration settings, they become part of the application's Azure AD registration.
2.  Consider that your application’s permissions have been updated, the application is running, and a user is about to use it for the first time. First the application needs to obtain an authorization code from Azure AD’s /authorize endpoint. The authorization code can then be used to acquire a new access and refresh token.
3.  If the user isn't already authenticated, Azure AD's **/authorize** endpoint prompts for sign-in.
4.  After the user has signed in, Azure AD determines if the user needs to be shown a consent page. This determination is based on whether the user (or the organization’s administrator) has already granted the application consent. If consent hasn't already been granted, Azure AD prompts the user for consent and displays the required permissions it needs to function. The permissions that are displayed in the consent dialog match the ones selected in the Delegated Permissions in the Azure portal.
5.  After the user grants consent, an authorization code is returned to your application, which is redeemed to acquire an access token and refresh token. For more information about this flow, see the [web Application to web API section in Authentication Scenarios for Azure AD](https://docs.microsoft.com/azure/active-directory/develop/active-directory-authentication-scenarios#web-application-to-web-api?azure-portal=true).
6.  An administrator can also consent to an application's delegated permissions for all the users in the company's tenant. Administrative consent prevents the consent dialog from appearing for every user in the tenant, and can be done in the Azure portal by users with the administrator role. From the application's **Settings** page, select **Required Permissions** and then select the **Grant Permissions** button.
